<app-header></app-header>

<main>
    <app-sidebar></app-sidebar>

    <app-dialog-add-task *ngIf="openDialogService.overlayAddTaskIsDisplayed"></app-dialog-add-task>

    <app-task-detail-view *ngIf="openDialogService.overlayTaskDetailViewIsDisplayed"></app-task-detail-view>

    <div class="containerBoard">
        <div class="containerBoardHeadline">
            <h1>Board</h1>

            <div class="containerInputFieldAndBtn">
                <input (keyup)="searchForTasks($event)" #inputFindTask type="text" placeholder="Find Task">
                <div (click)="focusInput()" class="containerImgMagnifyingGlass">
                    <img src="../../../assets/icons/magnifying-glass-icon.svg">
                </div>

                <hr>
                <button (click)="openDialogAddTask('toDo')" type="button">
                    Add task
                    <img src="../../../assets/icons/plus-icon-white.svg">
                </button>
            </div>
        </div>

        <div class="mainContainerColumns" cdkDropListGroup>
            <!-------------------------- Column To do -------------------------->
            <div class="containerSingleColumn">
                <div class="containerColumnHeadline">
                    <p>To do</p>
                    <img (click)="openDialogAddTask('toDo')" src="../../../assets/icons/plus-icon-blue.svg">
                </div>

                <!-------------------------- Only Displayed if no Tasks exist in Column -------------------------->
                <div *ngIf="createTaskService.toDoTaskArray.length == 0" class="containerMessageNoTasksExistInColumn">
                    <p>No tasks To do</p>
                </div>
                <!-------------------------- Only Displayed if no Tasks exist in Column -------------------------->

                <div class="column" cdkDropList [cdkDropListData]="createTaskService.toDoTaskArray"
                    (cdkDropListDropped)="dropTaskMiniView($event, 'toDo')">


                    <app-task-mini-view (click)="openDialogService.openDialogTaskDetailViewService(task)" cdkDrag
                        *ngFor="let task of createTaskService.toDoTaskArray" [task]="task">

                    </app-task-mini-view>
                </div>
            </div>
            <!-------------------------- Column To do -------------------------->

            <!-------------------------- Column In progress -------------------------->
            <div class="containerSingleColumn">
                <div class="containerColumnHeadline">
                    <p>In progress</p>
                    <img (click)="openDialogAddTask('inProgress')" src="../../../assets/icons/plus-icon-blue.svg">
                </div>

                <!-------------------------- Only Displayed if no Tasks exist in Column -------------------------->
                <div *ngIf="createTaskService.inProgressTaskArray.length == 0"
                    class="containerMessageNoTasksExistInColumn">
                    <p>No tasks In progress</p>
                </div>
                <!-------------------------- Only Displayed if no Tasks exist in Column -------------------------->

                <div class="column" cdkDropList [cdkDropListData]="createTaskService.inProgressTaskArray"
                    (cdkDropListDropped)="dropTaskMiniView($event, 'inProgress')">

                    <app-task-mini-view (click)="openDialogService.openDialogTaskDetailViewService(task)" cdkDrag
                        *ngFor="let task of createTaskService.inProgressTaskArray" [task]="task">

                    </app-task-mini-view>
                </div>
            </div>
            <!-------------------------- Column In progress -------------------------->

            <!-------------------------- Column Awaiting feedback -------------------------->
            <div class="containerSingleColumn">
                <div class="containerColumnHeadline">
                    <p>Awaiting feedback</p>
                    <img (click)="openDialogAddTask('awaitingFeedback')" src="../../../assets/icons/plus-icon-blue.svg">
                </div>

                <!-------------------------- Only Displayed if no Tasks exist in Column -------------------------->
                <div *ngIf="createTaskService.awaitingFeebackTaskArray.length == 0"
                    class="containerMessageNoTasksExistInColumn">
                    <p>No tasks Awaiting feedback</p>
                </div>
                <!-------------------------- Only Displayed if no Tasks exist in Column -------------------------->

                <div class="column" cdkDropList [cdkDropListData]="createTaskService.awaitingFeebackTaskArray"
                    (cdkDropListDropped)="dropTaskMiniView($event, 'awaitingFeedback')">

                    <app-task-mini-view (click)="openDialogService.openDialogTaskDetailViewService(task)" cdkDrag
                        *ngFor="let task of createTaskService.awaitingFeebackTaskArray" [task]="task">

                    </app-task-mini-view>
                </div>
            </div>
            <!-------------------------- Column Awaiting feedback -------------------------->

            <!-------------------------- Column Done -------------------------->
            <div class="containerSingleColumn">
                <div class="containerColumnHeadline">
                    <p>Done</p>
                </div>

                <!-------------------------- Only Displayed if no Tasks exist in Column -------------------------->
                <div *ngIf="createTaskService.doneTaskArray.length == 0" class="containerMessageNoTasksExistInColumn">
                    <p>No tasks Done</p>
                </div>
                <!-------------------------- Only Displayed if no Tasks exist in Column -------------------------->

                <div class="column" cdkDropList [cdkDropListData]="createTaskService.doneTaskArray"
                    (cdkDropListDropped)="dropTaskMiniView($event, 'done')">

                    <app-task-mini-view (click)="openDialogService.openDialogTaskDetailViewService(task)" cdkDrag
                        *ngFor="let task of createTaskService.doneTaskArray" [task]="task">

                    </app-task-mini-view>
                </div>
            </div>
            <!-------------------------- Column Done -------------------------->
        </div>


        <!--------------------- User Feedback if Task was deleted successfully --------------------->
        <div *ngIf="createTaskService.userFeedbackIsDisplayedIfSuccessfullyDeleted" [ngClass]="{'slideIn': createTaskService.taskSuccessfullyDeleted, 
           'slideOut': !createTaskService.taskSuccessfullyDeleted}" class="popUpSuccessfully">
            <p>Task successfully deleted.</p>
        </div>
        <!--------------------- User Feedback if Task was deleted successfully  --------------------->
    </div>
</main>